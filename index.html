<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Myanmar Empires 3D</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{margin:0;background:#111;color:#fff;font-family:sans-serif}
header{background:#7a1f1f;padding:10px;text-align:center;font-weight:bold}
.panel{padding:10px}
button{width:100%;padding:10px;margin:5px 0;font-size:16px;border:0;border-radius:6px;background:#c89b3c}
#game{width:100%;height:260px}
.card{background:#222;padding:10px;border-radius:6px;margin-bottom:10px}
.small{font-size:13px;color:#aaa}
input{width:100%;padding:8px;margin-top:5px}
</style>
</head>

<body>

<header>üèØ Myanmar Empires (3D)</header>

<div class="panel card">
<b>Player</b><br>
Level: <span id="lvl">1</span> |
Power: <span id="pwr">500</span> |
Rank: <span id="rnk">1000</span> |
Gold: <span id="gld">1000</span>
</div>

<div id="game"></div>

<div class="panel">
<button onclick="battle()">‚öîÔ∏è Battle (AI)</button>
<button onclick="levelUp()">‚¨ÜÔ∏è Level Up</button>
<button onclick="showLogin()">üîê Login to Save</button>
</div>

<div class="panel card">
<b>üõí Shop (Mock IAP)</b>
<button onclick="buyGold()">Buy 1000 Gold</button>
<button onclick="buyPower()">Buy Power Boost</button>
</div>

<div class="panel card">
<b>üìú Log</b>
<div id="log" class="small">Ready‚Ä¶</div>
</div>

<!-- LOGIN MODAL -->
<div id="login" style="display:none" class="panel card">
<b>Login</b>
<input placeholder="Phone / Gmail / Facebook ID">
<button onclick="login()">Send OTP (Mock)</button>
</div>

<script src="https://cdn.jsdelivr.net/npm/three@0.152.2/build/three.min.js"></script>

<script>
/* ===== PLAYER ===== */
let player={level:1,power:500,rank:1000,gold:1000,guest:true};

/* ===== UI ===== */
function ui(){
lvl.innerText=player.level;
pwr.innerText=player.power;
rnk.innerText=player.rank;
gld.innerText=player.gold;
}

/* ===== LOGIN ===== */
function showLogin(){
login.style.display="block";
log.innerText="Login after win = better save rate";
}
function login(){
player.guest=false;
login.style.display="none";
log.innerText="Login success (Mock Firebase)";
}

/* ===== LEVEL ===== */
function levelUp(){
player.level++;
player.power+=50;
log.innerText="Level Up!";
ui();
}

/* ===== SHOP ===== */
function buyGold(){
player.gold+=1000;
log.innerText="IAP Gold Purchased (Mock)";
ui();
}
function buyPower(){
if(player.gold>=500){
player.gold-=500;
player.power+=100;
log.innerText="Power Boost!";
}else log.innerText="Not enough gold";
ui();
}

/* ===== BATTLE AI ===== */
function battle(){
let ai=player.power+(Math.random()*200-100);
let me=player.power+(Math.random()*160-80);
if(me>=ai){
player.rank+=30;
player.gold+=200;
log.innerText="Victory vs AI!";
}else{
player.rank-=20;
log.innerText="Defeat vs AI";
}
ui();
animateBattle();
}

/* ===== 3D BATTLE ===== */
let scene=new THREE.Scene();
let cam=new THREE.PerspectiveCamera(75,window.innerWidth/260,0.1,1000);
let ren=new THREE.WebGLRenderer({antialias:true});
ren.setSize(window.innerWidth,260);
document.getElementById("game").appendChild(ren.domElement);

let geo=new THREE.BoxGeometry();
let mat1=new THREE.MeshStandardMaterial({color:0xff0000});
let mat2=new THREE.MeshStandardMaterial({color:0x00ff00});
let p1=new THREE.Mesh(geo,mat1);
let p2=new THREE.Mesh(geo,mat2);
p1.position.x=-1.5;
p2.position.x=1.5;
scene.add(p1);scene.add(p2);

let light=new THREE.PointLight(0xffffff,1);
light.position.set(5,5,5);
scene.add(light);
cam.position.z=5;

function animateBattle(){
let t=0;
function a(){
requestAnimationFrame(a);
t+=0.05;
p1.rotation.x+=0.1;
p2.rotation.y+=0.1;
p1.position.x=-1.5+Math.sin(t)*0.5;
p2.position.x=1.5-Math.sin(t)*0.5;
ren.render(scene,cam);
}
a();
}
ui();
</script>

</body>
</html>
